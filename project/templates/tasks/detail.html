{% extends "base.html" %}
{% block title %} Task - {{ task.title }} {% endblock %}

{% block content %}
<div class="card task-detail">
  <h2 class="task-title">{{ task.title }}</h2>
  <p class="task-meta">Created: {{ task.created_at|date:"d.m.Y" }}</p>

  <p class="task-desc">{{ task.description|default:"(no description)" }}</p>

  <ul class="task-info">
    <li><strong>Status:</strong> {{ task.get_status_display }}</li>
    <li><strong>Priority:</strong> {{ task.get_priority_display }}</li>
    <li>
      <strong>Deadline:</strong> {{ task.due_date|default:"-" }}
      {% if task.is_overdue %}
        <span class="overdue">(Overdue)</span>
      {% endif %}
    </li>
    <li><strong>Finished:</strong> {{ task.completed_at|date:"d.m.Y"|default:"-" }}</li>
    <li>
      <strong>Tags:</strong>
      {% if task.tags.all %}
        <span class="tags">
          {% for tag in task.tags.all %}
            <span class="tag">{{ tag.name }}</span>
          {% endfor %}
        </span>
      {% else %}
        none
      {% endif %}
    </li>
  </ul>

  <div class="task-actions">
           {% if task.status != 'done' %}
          <form method="post" action="{% url 'tasks:complete' task.pk %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-sm">Complete</button>
          </form>
        {% endif %}
    <a href="{% url 'tasks:edit' task.pk %}" class="btn btn-sm">Update</a>
    <a href="{% url 'tasks:delete' task.pk %}" class="btn btn-sm btn-danger">Delete</a>
    <a href="{% url 'tasks:list' %}" class="btn btn-sm btn-secondary">Back</a>
  </div>
</div>
{% endblock %}
